## –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ Spring Boot

REST API-—Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π JWT-–±–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —Å —Ä–æ–ª—è–º–∏ (`ROLE_GUEST`, `ROLE_PREMIUM_USER`, `ROLE_ADMIN`). –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL, Liquibase –∏ Spring Security.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* JWT Access –∏ Refresh —Ç–æ–∫–µ–Ω—ã
* –û—Ç–∑—ã–≤ (logout) refresh-—Ç–æ–∫–µ–Ω–∞ (—á–µ—Ä–µ–∑ blacklist)
* –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ —Ä–æ–ª—è–º:

  * `/api/guest` ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è `ROLE_GUEST`
  * `/api/premium_user` ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è `ROLE_PREMIUM_USER`
  * `/api/admin` ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è `ROLE_ADMIN`
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –µ–¥–∏–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
* Swagger UI —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ JWT

---



## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### üîß 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/TusyaSonne/AuthServiceT1.git
cd AuthServiceT1
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Docker Compose

```bash
docker-compose up --build
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

* Backend –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: `http://localhost:8080`
* Swagger UI: `http://localhost:8080/swagger-ui/index.html`

---

## –§–æ—Ä–º–∞—Ç JWT-—Ç–æ–∫–µ–Ω–æ–≤

* Access Token: –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è (15 –º–∏–Ω)
* Refresh Token: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access —Ç–æ–∫–µ–Ω–∞ (–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 7 –¥–Ω–µ–π)
* –ü–æ—Å–ª–µ **logout** refresh-—Ç–æ–∫–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –±–ª–µ–∫–ª–∏—Å—Ç –≤ –ë–î (–∏ –±–æ–ª—å—à–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è access-—Ç–æ–∫–µ–Ω–∞ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞–π—Ü–∏–∏ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ª—å–∑—è)

---

## Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ **http://localhost:8080/swagger-ui.html**, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Bearer-—Ç–æ–∫–µ–Ω (`Authorize`)
* –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: `/register`, `/login`, `/refresh`, `/logout`

---
## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞—â–∏—â—ë–Ω–Ω—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —Å –ø–æ–º–æ—â—å—é JWT-—Ç–æ–∫–µ–Ω–∞**.

1. –°–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è** —á–µ—Ä–µ–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/auth/register`, —É–∫–∞–∑–∞–≤ –Ω–∏–∫–Ω–µ–π–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ—á—Ç—É, –ø–∞—Ä–æ–ª—å –∏ —Ä–æ–ª–∏ (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–∫–∞–∂–µ—Ç —Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω–∞ —Ä–æ–ª—å `ROLE_GUEST`).

–ü—Ä–∏–º–µ—Ä:
  ```json
  {
    "username": "john doe",
    "email": "john@example.com",
    "password": "123456",
    "roles": [
      "ROLE_GUEST",
      "ROLE_ADMIN"
    ]
  }
  ```
3. –í –æ—Ç–≤–µ—Ç–µ –Ω–∞ —É—Å–ø–µ—à–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤—ã –ø–æ–ª—É—á–∏—Ç–µ **JWT-—Ç–æ–∫–µ–Ω—ã** - `access-—Ç–æ–∫–µ–Ω` –∏ `refresh-—Ç–æ–∫–µ–Ω`.
4. –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º –≤—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π access-—Ç–æ–∫–µ–Ω –≤ –æ–∫–Ω–æ **Authorize** (–≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É Swagger UI).
> –í—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ–∫–µ–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:  
> ```text
> eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
> ```



---

## –ú–∏–≥—Ä–∞—Ü–∏–∏ Liquibase

Liquibase –∏—Å–ø–æ–ª—å–∑—É–µ—Ç YAML-—Ñ–∞–π–ª—ã –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

* –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª: `db/changelog/master-changelog.yml`
* –¢–∞–±–ª–∏—Ü—ã: `users`, `roles`, `user_roles`, `revoked_tokens`
* –ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ä–æ–ª–∏ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `INSERT`-changelog
